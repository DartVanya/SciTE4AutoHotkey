diff --git a/.gitignore b/.gitignore
new file mode 100644
index 00000000..714245bd
--- /dev/null
+++ b/.gitignore
@@ -0,0 +1,78 @@
+.hg/
+*.o
+*.a
+*.asm
+*.lib
+*.obj
+*.iobj
+__pycache__
+*.pyc
+*.dll
+*.so
+*.dylib
+*.framework
+*.pyd
+*.exe
+*.exp
+*.lib
+*.pdb
+*.ipdb
+*.res
+*.bak
+*.sbr
+*.suo
+*.aps
+*.sln
+*.vcxproj.*
+*.idb
+*.bsc
+*.intermediate.manifest
+*.lastbuildstate
+*.cache
+*.ilk
+*.ncb
+*.tlog
+*.sdf
+gtk/*.plist
+win32/*.plist
+*.opt
+*.plg
+*.pbxbtree
+*.mode1v3
+*.pbxuser
+*.pbproj
+*.log
+*.xcbkptlist
+*.xcuserstate
+xcuserdata/
+*.xcsettings
+xcschememanagement.plist
+.DS_Store
+Release
+Debug
+cocoa/build
+cocoa/ScintillaFramework/build
+cocoa/ScintillaTest/build
+macosx/SciTest/build
+*.cppcheck
+Makefile.Debug
+Makefile.Release
+*_resource.rc
+moc_*
+*.pro.user
+.qmake.stash
+ScintillaEdit.cpp
+ScintillaEdit.h
+ScintillaConstants.py
+ScintillaEditBase.intermediate.manifest
+ScintillaEdit.intermediate.manifest
+qt/*/Makefile
+cov-int
+.vs
+meson-private
+meson-logs
+build.ninja
+.ninja*
+compile_commands.json
+.vscode
+VTune Profiler Results
diff --git a/win32/makefile b/win32/makefile
index 5bb14605..3e3b095d 100644
--- a/win32/makefile
+++ b/win32/makefile
@@ -29,14 +29,14 @@ ARFLAGS = rc
 RANLIB ?= ranlib
 WINDRES ?= windres
 
-# Environment variable windir always defined on Win32
+# Environment variable WINDIR always defined on Win32
 
 # Take care of changing Unix style '/' directory separator to '\' on Windows
-normalize = $(if $(windir),$(subst /,\,$1),$1)
+normalize = $(if $(WINDIR),$(subst /,\,$1),$1)
 
-PYTHON = $(if $(windir),pyw,python3)
+PYTHON = $(if $(WINDIR),pyw,python3)
 
-ifdef windir
+ifdef WINDIR
 DEL = $(if $(wildcard $(dir $(SHELL))rm.exe), $(dir $(SHELL))rm.exe -f, del /q)
 else
 DEL = rm -f
